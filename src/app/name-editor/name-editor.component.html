<form>
  <fieldset
    *ngFor="
      let insured of insuredList;
      let index = index;
      trackBy: trackByIndex
    "
  >
    <legend>使用者</legend>
    <p>
      <label [for]="'name-' + index">姓名：</label>
      <input
        type="text"
        [name]="'name-' + index"
        required
        maxlength="10"
        minlength="2"
        [(ngModel)]="insured.name"
      />
      {{ insured.name }}
      <span class="error-message">{{ insured.nameErrorMessage }}</span>
    </p>
    <p>
      性別：
      <input
        type="radio"
        [name]="'gender-' + index"
        value="male"
        required
        [(ngModel)]="insured.gender"
      />
      <label [for]="'male-' + index">男</label>
      <input
        type="radio"
        [name]="'gender-' + index"
        value="female"
        required
        [(ngModel)]="insured.gender"
      />
      <label [for]="'female-' + index">女</label>
    </p>
    <p>
      <label [for]="'age-' + index">年齡：</label>
      <select [name]="'age-' + index" required [(ngModel)]="insured.age">
        <option value="">請選擇</option>
        <option value="18">18歲</option>
        <option value="20">20歲</option>
        <option value="70">70歲</option>
        <option value="75">75歲</option>
      </select>
      <span class="error-message">{{ insured.ageErrorMessage }}</span>
    </p>
    <p><button type="button" (click)="deleteInsured(index)">刪除</button></p>
  </fieldset>
  <p>
    <button type="button" (click)="add()">建立</button>
    <button type="submit">送出</button>
  </p>
</form>

<pre>{{ insuredList | json }}</pre>
